# Hubbub Automation Scripts
[![CircleCI](https://circleci.com/gh/hubbubhealth/automation-scripts.svg?style=svg)](https://circleci.com/gh/hubbubhealth/automation-scripts)

Automation scripts with
  * minitest
  * capybara
  * poltergest/phantomjs

## How to run

Full suite
```shell
$ bin/run
```

A single file

```shell
$ bin/run file_path
```

## Guidelines

### PageObjects

A page object is the object abtraction of an html page. Therefore you must consider to have mapped all the necesary elements for your test like inputs, selects and buttons.
*Note*: all maped elements must be present on DOM load and should not be dynamic generated by any javascript action.

```ruby
class MyPage < Capybara::PageMapper::Base
  define_input :email, '//*[@id="user_email"]'
  define_input :password, '//*[@id="user_password"]'
  define_select :status, '//*[@id="user_status"]'
  define_button :submit, '//*[@id="log_in"]'
  ...
end
```

For actions you must add ! to your method to warn the reader that the method called is going to modify something within the page object

```ruby
class MyPage < Capybara::PageMapper::Base
  ...
  def submit_profile!
    submit_button.click
  end
  ...
end
```

As well for validator use the ruby convetion of add ? on methods that return boolean values


```ruby
class MyPage < Capybara::PageMapper::Base
  ...
  def has_submited_value?
    page.has_content?("My Awesome Value")
  end
  ...
end
```

validators also can include other page objects

```ruby
class MyPage < Capybara::PageMapper::Base
  ...
  def has_submited_value?
    OtherPage.new.valid?
  end
  ...
end
```

### Tests

Once the page object is defined, the tests must include the page object to be tested, and perform the actions in the flow, and as first test must check if the page is valid


```ruby
class APageTest < Minitest::Test
  def subject
    MyPage.new
  end

  def test_valid
    subject.valid?
  end
  
  # more tests ...
end
```


## Contributing

Bug reports and pull requests are welcome on GitHub at https://github.com/hubbubhealth/automation-scripts
